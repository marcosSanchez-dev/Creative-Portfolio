/*! For license information please see main.3a1732432012ac7068ca.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/index.js":(e,t,n)=>{n.r(t);var s=n("./node_modules/normalize-wheel/index.js"),a=n.n(s),i=n("./node_modules/lodash/each.js"),o=n.n(i),h=n("./app/components/Canvas/index.js"),d=(n("./app/classes/Detection.js"),n("./app/components/Navigation.js")),c=n("./app/components/Preloader.js"),p=n("./app/pages/About/index.js"),r=n("./app/pages/Collections/index.js"),l=n("./app/pages/Home/index.js"),u=n("./app/pages/Detail/index.js");new class{constructor(){this.createContent(),this.createCanvas(),this.createPreloader(),this.createNavigation(),this.createPages(),this.addEventListeners(),this.addLinkListeners(),this.onResize(),this.update()}createNavigation(){this.navigation=new d.default({template:this.template})}createPreloader(){this.preloader=new c.default({canvas:this.canvas}),this.preloader.once("completed",this.onPreloaded.bind(this))}createCanvas(){this.canvas=new h.default({template:this.template})}createContent(){this.content=document.querySelector(".content"),this.template=this.content.getAttribute("data-template")}createPages(){this.pages={about:new p.default,collections:new r.default,home:new l.default,detail:new u.default},this.page=this.pages[this.template],this.page.create()}onPreloaded(){this.onResize(),this.canvas.onPreloaded(),this.page.show()}onPopState(){this.onChange({url:window.location.pathname,push:!0})}async onChange({url:e,push:t=!0}){this.canvas.onChangeStart(this.template,e),await this.page.hide();const n=await window.fetch(e);if(200===n.status){const s=await n.text(),a=document.createElement("div");t&&window.history.pushState({},"",e),a.innerHTML=s;const i=a.querySelector(".content");this.template=i.getAttribute("data-template"),this.navigation.onChange(this.template),this.content.setAttribute("data-template",this.template),this.content.innerHTML=i.innerHTML,this.canvas.onChangeEnd(this.template),this.page=this.pages[this.template],this.page.create(),this.onResize(),this.page.show(),this.addLinkListeners()}else console.error(`response status: ${n.status}`)}onResize(){this.page&&this.page.onResize&&this.page.onResize(),window.requestAnimationFrame((e=>{this.canvas&&this.canvas.onResize&&this.canvas.onResize()}))}onTouchDown(e){this.canvas&&this.canvas.onTouchDown&&this.canvas.onTouchDown(e)}onTouchMove(e){this.canvas&&this.canvas.onTouchMove&&this.canvas.onTouchMove(e)}onTouchUp(e){this.canvas&&this.canvas.onTouchUp&&this.canvas.onTouchUp(e)}onWheel(e){const t=a()(e);this.canvas&&this.canvas.onWheel&&this.canvas.onWheel(t),this.page&&this.page.onWheel&&this.page.onWheel(t)}update(){this.page&&this.page.update&&this.page.update(),this.canvas&&this.canvas.update&&this.canvas.update(this.page.scroll),this.frame=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){window.addEventListener("wheel",this.onWheel.bind(this)),window.addEventListener("mousedown",this.onTouchDown.bind(this)),window.addEventListener("mousemove",this.onTouchMove.bind(this)),window.addEventListener("mouseup",this.onTouchUp.bind(this)),window.addEventListener("touchstart",this.onTouchDown.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchUp.bind(this)),window.addEventListener("pointerdown",this.onTouchDown.bind(this)),window.addEventListener("pointermove",this.onTouchMove.bind(this)),window.addEventListener("pointerup",this.onTouchUp.bind(this)),window.addEventListener("resize",this.onResize.bind(this))}addLinkListeners(){const e=document.querySelectorAll("a");o()(e,(e=>{e.onclick=t=>{t.preventDefault();const{href:n}=e;this.onChange({url:n})}}))}}}},(function(e){e.h=()=>"1eeecf03b74dc66569a5"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1pRSxFQUFRbkQsU0FBU29ELGlCQUFpQixLQUV4Q0MsR0FBQUEsQ0FBS0YsR0FBUUcsSUFDWEEsRUFBS0MsUUFBV0MsSUFDZEEsRUFBTUMsaUJBRU4sTUFBTSxLQUFFQyxHQUFTSixFQUNqQjNFLEtBQUtxQyxTQUFTLENBQUVDLElBQUt5Qyx5QkNuTzdCQyxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmxvZW1hLy4vYXBwL2luZGV4LmpzIiwid2VicGFjazovL2Zsb2VtYS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLW5ldyAqL1xuXG5pbXBvcnQgTm9ybWFsaXplV2hlZWwgZnJvbSBcIm5vcm1hbGl6ZS13aGVlbFwiO1xuXG5pbXBvcnQgZWFjaCBmcm9tIFwibG9kYXNoL2VhY2hcIjtcblxuaW1wb3J0IENhbnZhcyBmcm9tIFwiY29tcG9uZW50cy9DYW52YXNcIjtcbmltcG9ydCBEZXRlY3Rpb24gZnJvbSBcImNsYXNzZXMvRGV0ZWN0aW9uXCI7XG5cbmltcG9ydCBOYXZpZ2F0aW9uIGZyb20gXCJjb21wb25lbnRzL05hdmlnYXRpb25cIjtcbmltcG9ydCBQcmVsb2FkZXIgZnJvbSBcImNvbXBvbmVudHMvUHJlbG9hZGVyXCI7XG5cbmltcG9ydCBBYm91dCBmcm9tIFwicGFnZXMvQWJvdXRcIjtcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tIFwicGFnZXMvQ29sbGVjdGlvbnNcIjtcbmltcG9ydCBIb21lIGZyb20gXCJwYWdlcy9Ib21lXCI7XG5pbXBvcnQgRGV0YWlsIGZyb20gXCJwYWdlcy9EZXRhaWxcIjtcblxuY2xhc3MgQXBwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jcmVhdGVDb250ZW50KCk7XG5cbiAgICB0aGlzLmNyZWF0ZUNhbnZhcygpO1xuICAgIHRoaXMuY3JlYXRlUHJlbG9hZGVyKCk7XG4gICAgdGhpcy5jcmVhdGVOYXZpZ2F0aW9uKCk7XG4gICAgdGhpcy5jcmVhdGVQYWdlcygpO1xuXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuYWRkTGlua0xpc3RlbmVycygpO1xuXG4gICAgdGhpcy5vblJlc2l6ZSgpO1xuXG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIGNyZWF0ZU5hdmlnYXRpb24oKSB7XG4gICAgdGhpcy5uYXZpZ2F0aW9uID0gbmV3IE5hdmlnYXRpb24oe1xuICAgICAgdGVtcGxhdGU6IHRoaXMudGVtcGxhdGUsXG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVQcmVsb2FkZXIoKSB7XG4gICAgdGhpcy5wcmVsb2FkZXIgPSBuZXcgUHJlbG9hZGVyKHtcbiAgICAgIGNhbnZhczogdGhpcy5jYW52YXMsXG4gICAgfSk7XG5cbiAgICB0aGlzLnByZWxvYWRlci5vbmNlKFwiY29tcGxldGVkXCIsIHRoaXMub25QcmVsb2FkZWQuYmluZCh0aGlzKSk7XG4gIH1cblxuICBjcmVhdGVDYW52YXMoKSB7XG4gICAgdGhpcy5jYW52YXMgPSBuZXcgQ2FudmFzKHtcbiAgICAgIHRlbXBsYXRlOiB0aGlzLnRlbXBsYXRlLFxuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlQ29udGVudCgpIHtcbiAgICB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRcIik7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMuY29udGVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRlbXBsYXRlXCIpO1xuICB9XG5cbiAgY3JlYXRlUGFnZXMoKSB7XG4gICAgdGhpcy5wYWdlcyA9IHtcbiAgICAgIGFib3V0OiBuZXcgQWJvdXQoKSxcbiAgICAgIGNvbGxlY3Rpb25zOiBuZXcgQ29sbGVjdGlvbnMoKSxcbiAgICAgIGhvbWU6IG5ldyBIb21lKCksXG4gICAgICBkZXRhaWw6IG5ldyBEZXRhaWwoKSxcbiAgICB9O1xuXG4gICAgdGhpcy5wYWdlID0gdGhpcy5wYWdlc1t0aGlzLnRlbXBsYXRlXTtcbiAgICB0aGlzLnBhZ2UuY3JlYXRlKCk7XG4gIH1cblxuICAvKlxuICAgKiBFdmVudHNcbiAgICovXG5cbiAgb25QcmVsb2FkZWQoKSB7XG4gICAgdGhpcy5vblJlc2l6ZSgpO1xuXG4gICAgdGhpcy5jYW52YXMub25QcmVsb2FkZWQoKTtcblxuICAgIHRoaXMucGFnZS5zaG93KCk7XG4gIH1cblxuICBvblBvcFN0YXRlKCkge1xuICAgIHRoaXMub25DaGFuZ2Uoe1xuICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICBwdXNoOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgb25DaGFuZ2UoeyB1cmwsIHB1c2ggPSB0cnVlIH0pIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcInBhdGhuYW1lOiBcIiwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcIndpbmRvdy5sb2NhdGlvbjogXCIsIHdpbmRvdy5sb2NhdGlvbik7XG4gICAgLy8gY29uc29sZS5sb2coXCJ1cmw6IFwiLCB1cmwpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwidXJsID09IC86IFwiLCB1cmwgPT0gXCIvXCIpO1xuICAgIC8vIGNvbnNvbGUubG9nKFwidXJsIGluY2x1ZGVzIEFib3V0OiBcIiwgdXJsLmluY2x1ZGVzKFwiL2Fib3V0XCIpKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcInVybCBwYXRobmFtZSA9PT0gSG9tZTogXCIsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PSBcIi9cIik7XG5cbiAgICB0aGlzLmNhbnZhcy5vbkNoYW5nZVN0YXJ0KHRoaXMudGVtcGxhdGUsIHVybCk7XG5cbiAgICBhd2FpdCB0aGlzLnBhZ2UuaGlkZSgpO1xuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgd2luZG93LmZldGNoKHVybCk7XG5cbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICAgIGlmIChwdXNoKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgXCJcIiwgdXJsKTtcbiAgICAgIH1cblxuICAgICAgZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgIGNvbnN0IGRpdkNvbnRlbnQgPSBkaXYucXVlcnlTZWxlY3RvcihcIi5jb250ZW50XCIpO1xuXG4gICAgICB0aGlzLnRlbXBsYXRlID0gZGl2Q29udGVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRlbXBsYXRlXCIpO1xuXG4gICAgICB0aGlzLm5hdmlnYXRpb24ub25DaGFuZ2UodGhpcy50ZW1wbGF0ZSk7XG5cbiAgICAgIHRoaXMuY29udGVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRlbXBsYXRlXCIsIHRoaXMudGVtcGxhdGUpO1xuICAgICAgdGhpcy5jb250ZW50LmlubmVySFRNTCA9IGRpdkNvbnRlbnQuaW5uZXJIVE1MO1xuXG4gICAgICB0aGlzLmNhbnZhcy5vbkNoYW5nZUVuZCh0aGlzLnRlbXBsYXRlKTtcblxuICAgICAgdGhpcy5wYWdlID0gdGhpcy5wYWdlc1t0aGlzLnRlbXBsYXRlXTtcbiAgICAgIHRoaXMucGFnZS5jcmVhdGUoKTtcblxuICAgICAgdGhpcy5vblJlc2l6ZSgpO1xuXG4gICAgICB0aGlzLnBhZ2Uuc2hvdygpO1xuXG4gICAgICB0aGlzLmFkZExpbmtMaXN0ZW5lcnMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihgcmVzcG9uc2Ugc3RhdHVzOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuICB9XG5cbiAgb25SZXNpemUoKSB7XG4gICAgaWYgKHRoaXMucGFnZSAmJiB0aGlzLnBhZ2Uub25SZXNpemUpIHtcbiAgICAgIHRoaXMucGFnZS5vblJlc2l6ZSgpO1xuICAgIH1cblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKF8pID0+IHtcbiAgICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblJlc2l6ZSkge1xuICAgICAgICB0aGlzLmNhbnZhcy5vblJlc2l6ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgb25Ub3VjaERvd24oZSkge1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblRvdWNoRG93bikge1xuICAgICAgdGhpcy5jYW52YXMub25Ub3VjaERvd24oZSk7XG4gICAgfVxuICB9XG5cbiAgb25Ub3VjaE1vdmUoZSkge1xuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy5vblRvdWNoTW92ZSkge1xuICAgICAgdGhpcy5jYW52YXMub25Ub3VjaE1vdmUoZSk7XG4gICAgfVxuICB9XG5cbiAgb25Ub3VjaFVwKGUpIHtcbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMub25Ub3VjaFVwKSB7XG4gICAgICB0aGlzLmNhbnZhcy5vblRvdWNoVXAoZSk7XG4gICAgfVxuICB9XG5cbiAgb25XaGVlbChlKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZFdoZWVsID0gTm9ybWFsaXplV2hlZWwoZSk7XG5cbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMub25XaGVlbCkge1xuICAgICAgdGhpcy5jYW52YXMub25XaGVlbChub3JtYWxpemVkV2hlZWwpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLm9uV2hlZWwpIHtcbiAgICAgIHRoaXMucGFnZS5vbldoZWVsKG5vcm1hbGl6ZWRXaGVlbCk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIExPb3BcbiAgICovXG5cbiAgdXBkYXRlKCkge1xuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLnVwZGF0ZSkge1xuICAgICAgdGhpcy5wYWdlLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy51cGRhdGUpIHtcbiAgICAgIHRoaXMuY2FudmFzLnVwZGF0ZSh0aGlzLnBhZ2Uuc2Nyb2xsKTtcbiAgICB9XG5cbiAgICB0aGlzLmZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qXG4gICAqIExpc3RlbmVyc1xuICAgKi9cblxuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIHRoaXMub25XaGVlbC5iaW5kKHRoaXMpKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMub25Ub3VjaERvd24uYmluZCh0aGlzKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5vblRvdWNoVXAuYmluZCh0aGlzKSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5vblRvdWNoRG93bi5iaW5kKHRoaXMpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcykpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5vblRvdWNoVXAuYmluZCh0aGlzKSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMub25Ub3VjaERvd24uYmluZCh0aGlzKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcykpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMub25Ub3VjaFVwLmJpbmQodGhpcykpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGFkZExpbmtMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYVwiKTtcblxuICAgIGVhY2gobGlua3MsIChsaW5rKSA9PiB7XG4gICAgICBsaW5rLm9uY2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB7IGhyZWYgfSA9IGxpbms7XG4gICAgICAgIHRoaXMub25DaGFuZ2UoeyB1cmw6IGhyZWYgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG59XG5cbm5ldyBBcHAoKTtcbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjFlZWVjZjAzYjc0ZGM2NjU2OWE1XCIpIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGhpcyIsImNyZWF0ZUNvbnRlbnQiLCJjcmVhdGVDYW52YXMiLCJjcmVhdGVQcmVsb2FkZXIiLCJjcmVhdGVOYXZpZ2F0aW9uIiwiY3JlYXRlUGFnZXMiLCJhZGRFdmVudExpc3RlbmVycyIsImFkZExpbmtMaXN0ZW5lcnMiLCJvblJlc2l6ZSIsInVwZGF0ZSIsIm5hdmlnYXRpb24iLCJOYXZpZ2F0aW9uIiwidGVtcGxhdGUiLCJwcmVsb2FkZXIiLCJQcmVsb2FkZXIiLCJjYW52YXMiLCJvbmNlIiwib25QcmVsb2FkZWQiLCJiaW5kIiwiQ2FudmFzIiwiY29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdldEF0dHJpYnV0ZSIsInBhZ2VzIiwiYWJvdXQiLCJBYm91dCIsImNvbGxlY3Rpb25zIiwiQ29sbGVjdGlvbnMiLCJob21lIiwiSG9tZSIsImRldGFpbCIsIkRldGFpbCIsInBhZ2UiLCJjcmVhdGUiLCJzaG93Iiwib25Qb3BTdGF0ZSIsIm9uQ2hhbmdlIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsInB1c2giLCJvbkNoYW5nZVN0YXJ0IiwiaGlkZSIsInJlcyIsImZldGNoIiwic3RhdHVzIiwiaHRtbCIsInRleHQiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImlubmVySFRNTCIsImRpdkNvbnRlbnQiLCJzZXRBdHRyaWJ1dGUiLCJvbkNoYW5nZUVuZCIsImNvbnNvbGUiLCJlcnJvciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl8iLCJvblRvdWNoRG93biIsImUiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJub3JtYWxpemVkV2hlZWwiLCJOb3JtYWxpemVXaGVlbCIsInNjcm9sbCIsImZyYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImVhY2giLCJsaW5rIiwib25jbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJocmVmIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9