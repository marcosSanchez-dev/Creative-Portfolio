/*! For license information please see main.0b6dc83c4d761cc78a12.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/classes/Page.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>f});var i=s("./node_modules/gsap/index.js"),a=s("./node_modules/prefix/index.js"),n=s.n(a),l=s("./node_modules/lodash/each.js"),o=s.n(l),r=s("./node_modules/lodash/map.js"),h=s.n(r),m=s("./app/animations/Title.js"),c=s("./app/animations/Paragraph.js"),d=s("./app/animations/Label.js"),u=s("./app/animations/Highlight.js"),p=s("./app/classes/AsyncLoad.js"),g=s("./app/classes/Colors.js");class f{constructor({element:t,elements:e,id:s}){this.selector=t,this.selectorChildren={...e,aimationsHighlights:'[data-animation="highlight"]',animationsTitles:'[data-animation="title"]',animationsParagraphs:'[data-animation="paragraph"]',animationsLabels:'[data-animation="label"]',preloaders:"[data-src]"},this.id=s,this.transformPrefix=n()("transform")}create(){this.element=document.querySelector(this.selector),this.elements={},this.scroll={current:0,target:0,start:0,last:0,limit:0},this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0},o()(this.selectorChildren,((t,e)=>{t instanceof window.HTMLElement||t instanceof window.NodeList||Array.isArray(t)?this.elements[e]=t:(this.elements[e]=document.querySelectorAll(t),0===this.elements[e].length?this.elements[e]=null:1===this.elements[e].length&&(this.elements[e]=document.querySelector(t)))})),this.createAnimations(),this.createPreloader()}createPreloader(){this.preloaders=h()(this.elements.preloaders,(t=>new p.default({element:t})))}createAnimations(){this.animations=[],this.animationsTitles=h()(this.elements.animationsTitles,(t=>new m.default({element:t}))),this.animations.push(...this.animationsTitles),this.animationsParagraphs=h()(this.elements.animationsParagraphs,(t=>new c.default({element:t}))),this.animations.push(...this.animationsParagraphs),this.animationsLabels=h()(this.elements.animationsLabels,(t=>new d.default({element:t}))),this.animations.push(...this.animationsLabels),this.aimationsHighlights=h()(this.elements.aimationsHighlights,(t=>new u.default({element:t}))),this.animations.push(...this.aimationsHighlights)}show(t){return new Promise((e=>{g.ColorsManager.change({backgroundColor:this.element.getAttribute("data-background"),color:this.element.getAttribute("data-color")}),t?this.animationIn=t:(this.animationIn=i.default.timeline(),this.animationIn.fromTo(this.element,{autoAlpha:0},{autoAlpha:1})),this.animationIn.call((t=>{this.addEventListeners(),e()}))}))}hide(){return new Promise((t=>{this.destroy(),this.animationIn=i.default.timeline(),this.animationIn.to(this.element,{autoAlpha:0,onComplete:t})}))}onResize(){this.elements.wrapper&&(this.scroll.limit=this.elements.wrapper.clientHeight-window.innerHeight),o()(this.animations,(t=>t.onResize()))}onWheel({pixelY:t}){this.scroll.target+=t}onTouchDown(t){this.isDown=!0,this.y.start=t.touches?t.touches[0].clientY:t.clientY,this.scroll.start=this.scroll.current}onTouchUp(t){this.isDown=!1,this.y.end=t.touches?t.touches[0].clientY:t.clientY}onTouchMove(t){if(!this.isDown)return;this.y.end=t.touches?t.touches[0].clientY:t.clientY;const e=this.y.start-this.y.end;this.scroll.target=this.scroll.start+e}update(){this.scroll.target=i.default.utils.clamp(0,this.scroll.limit,this.scroll.target),this.scroll.current=i.default.utils.interpolate(this.scroll.current,this.scroll.target,.1),this.scroll.current<.01&&(this.scroll.current=0),this.elements.wrapper&&(this.elements.wrapper.style[this.transformPrefix]=`translateY(-${this.scroll.current}px)`)}addEventListeners(){}removeEventListeners(){}destroy(){this.removeEventListeners()}}}},(function(t){t.h=()=>"08983a5ac9dd9faa9a27"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEQsS0FBS2EsT0FBT0MsUUFDWmQsS0FBS2EsT0FBT0UsT0FDWixJQUdFZixLQUFLYSxPQUFPQyxRQUFVLE1BQ3hCZCxLQUFLYSxPQUFPQyxRQUFVLEdBR3BCZCxLQUFLRixTQUFTaUUsVUFDaEIvRCxLQUFLRixTQUFTaUUsUUFBUWEsTUFDcEI1RSxLQUFLUSxpQkFDRixlQUFjUixLQUFLYSxPQUFPQyxjQU1uQzJDLHFCQUVBb0Isd0JBSUFsQixVQUNFM0QsS0FBSzZFLHdDQzlQVEMsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9jbGFzc2VzL1BhZ2UuanMiLCJ3ZWJwYWNrOi8vZmxvZW1hL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuaW1wb3J0IEdTQVAgZnJvbSBcImdzYXBcIjtcblxuaW1wb3J0IFByZWZpeCBmcm9tIFwicHJlZml4XCI7XG5cbmltcG9ydCBlYWNoIGZyb20gXCJsb2Rhc2gvZWFjaFwiO1xuaW1wb3J0IG1hcCBmcm9tIFwibG9kYXNoL21hcFwiO1xuXG5pbXBvcnQgVGl0bGUgZnJvbSBcImFuaW1hdGlvbnMvVGl0bGVcIjtcbmltcG9ydCBQYXJhZ3JhcGggZnJvbSBcImFuaW1hdGlvbnMvUGFyYWdyYXBoXCI7XG5pbXBvcnQgTGFiZWwgZnJvbSBcImFuaW1hdGlvbnMvTGFiZWxcIjtcbmltcG9ydCBIaWdobGlnaHQgZnJvbSBcImFuaW1hdGlvbnMvSGlnaGxpZ2h0XCI7XG5cbmltcG9ydCBBc3luY0xvYWQgZnJvbSBcImNsYXNzZXMvQXN5bmNMb2FkXCI7XG5cbmltcG9ydCB7IENvbG9yc01hbmFnZXIgfSBmcm9tIFwiY2xhc3Nlcy9Db2xvcnNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnZSB7XG4gIGNvbnN0cnVjdG9yKHsgZWxlbWVudCwgZWxlbWVudHMsIGlkIH0pIHtcbiAgICB0aGlzLnNlbGVjdG9yID0gZWxlbWVudDtcbiAgICB0aGlzLnNlbGVjdG9yQ2hpbGRyZW4gPSB7XG4gICAgICAuLi5lbGVtZW50cyxcblxuICAgICAgYWltYXRpb25zSGlnaGxpZ2h0czogJ1tkYXRhLWFuaW1hdGlvbj1cImhpZ2hsaWdodFwiXScsXG4gICAgICBhbmltYXRpb25zVGl0bGVzOiAnW2RhdGEtYW5pbWF0aW9uPVwidGl0bGVcIl0nLFxuICAgICAgYW5pbWF0aW9uc1BhcmFncmFwaHM6ICdbZGF0YS1hbmltYXRpb249XCJwYXJhZ3JhcGhcIl0nLFxuICAgICAgYW5pbWF0aW9uc0xhYmVsczogJ1tkYXRhLWFuaW1hdGlvbj1cImxhYmVsXCJdJyxcblxuICAgICAgcHJlbG9hZGVyczogXCJbZGF0YS1zcmNdXCIsXG4gICAgfTtcblxuICAgIHRoaXMuaWQgPSBpZDtcblxuICAgIHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KFwidHJhbnNmb3JtXCIpO1xuICB9XG5cbiAgY3JlYXRlKCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZWxlY3Rvcik7XG4gICAgLy8gY29uc29sZS5sb2coXCJwYWdlIGNsYXNzIGVsZW1lbnQ6IFwiLCB0aGlzLmVsZW1lbnQpO1xuICAgIHRoaXMuZWxlbWVudHMgPSB7fTtcblxuICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIHN0YXJ0OiAwLFxuICAgICAgbGFzdDogMCxcbiAgICAgIGxpbWl0OiAwLFxuICAgIH07XG5cbiAgICB0aGlzLnggPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwLFxuICAgIH07XG5cbiAgICB0aGlzLnkgPSB7XG4gICAgICBzdGFydDogMCxcbiAgICAgIGRpc3RhbmNlOiAwLFxuICAgICAgZW5kOiAwLFxuICAgIH07XG5cbiAgICBlYWNoKHRoaXMuc2VsZWN0b3JDaGlsZHJlbiwgKGVudHJ5LCBrZXkpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZW50cnkgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEVsZW1lbnQgfHxcbiAgICAgICAgZW50cnkgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZUxpc3QgfHxcbiAgICAgICAgQXJyYXkuaXNBcnJheShlbnRyeSlcbiAgICAgICkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzW2tleV0gPSBlbnRyeTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHNba2V5XSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZW50cnkpO1xuXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRzW2tleV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50c1trZXldID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnRzW2tleV0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50c1trZXldID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbnRyeSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlQW5pbWF0aW9ucygpO1xuXG4gICAgdGhpcy5jcmVhdGVQcmVsb2FkZXIoKTtcbiAgfVxuXG4gIGNyZWF0ZVByZWxvYWRlcigpIHtcbiAgICB0aGlzLnByZWxvYWRlcnMgPSBtYXAodGhpcy5lbGVtZW50cy5wcmVsb2FkZXJzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBBc3luY0xvYWQoeyBlbGVtZW50IH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQW5pbWF0aW9uc1xuXG4gIGNyZWF0ZUFuaW1hdGlvbnMoKSB7XG4gICAgdGhpcy5hbmltYXRpb25zID0gW107XG5cbiAgICAvLyBUaXRsZXNcblxuICAgIHRoaXMuYW5pbWF0aW9uc1RpdGxlcyA9IG1hcCh0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbnNUaXRsZXMsIChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFRpdGxlKHtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hbmltYXRpb25zLnB1c2goLi4udGhpcy5hbmltYXRpb25zVGl0bGVzKTtcblxuICAgIC8vIFBhcmFncmFwaHNcblxuICAgIHRoaXMuYW5pbWF0aW9uc1BhcmFncmFwaHMgPSBtYXAoXG4gICAgICB0aGlzLmVsZW1lbnRzLmFuaW1hdGlvbnNQYXJhZ3JhcGhzLFxuICAgICAgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJhZ3JhcGgoe1xuICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCguLi50aGlzLmFuaW1hdGlvbnNQYXJhZ3JhcGhzKTtcblxuICAgIC8vIExhYmVsc1xuXG4gICAgdGhpcy5hbmltYXRpb25zTGFiZWxzID0gbWFwKHRoaXMuZWxlbWVudHMuYW5pbWF0aW9uc0xhYmVscywgKGVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiBuZXcgTGFiZWwoe1xuICAgICAgICBlbGVtZW50LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCguLi50aGlzLmFuaW1hdGlvbnNMYWJlbHMpO1xuXG4gICAgLy8gSGlnaGxpZ2h0c1xuXG4gICAgdGhpcy5haW1hdGlvbnNIaWdobGlnaHRzID0gbWFwKFxuICAgICAgdGhpcy5lbGVtZW50cy5haW1hdGlvbnNIaWdobGlnaHRzLFxuICAgICAgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaWdobGlnaHQoe1xuICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLmFuaW1hdGlvbnMucHVzaCguLi50aGlzLmFpbWF0aW9uc0hpZ2hsaWdodHMpO1xuICB9XG5cbiAgc2hvdyhhbmltYXRpb24pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIENvbG9yc01hbmFnZXIuY2hhbmdlKHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1iYWNrZ3JvdW5kXCIpLFxuICAgICAgICBjb2xvcjogdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtY29sb3JcIiksXG4gICAgICB9KTtcblxuICAgICAgaWYgKGFuaW1hdGlvbikge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkluID0gYW5pbWF0aW9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb25JbiA9IEdTQVAudGltZWxpbmUoKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25Jbi5mcm9tVG8oXG4gICAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGF1dG9BbHBoYTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGF1dG9BbHBoYTogMSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYW5pbWF0aW9uSW4uY2FsbCgoXykgPT4ge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5kZXN0cm95KCk7XG5cbiAgICAgIHRoaXMuYW5pbWF0aW9uSW4gPSBHU0FQLnRpbWVsaW5lKCk7XG5cbiAgICAgIHRoaXMuYW5pbWF0aW9uSW4udG8odGhpcy5lbGVtZW50LCB7XG4gICAgICAgIGF1dG9BbHBoYTogMCxcbiAgICAgICAgb25Db21wbGV0ZTogcmVzb2x2ZSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gRXZlbnRzXG5cbiAgb25SZXNpemUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudHMud3JhcHBlcikge1xuICAgICAgdGhpcy5zY3JvbGwubGltaXQgPVxuICAgICAgICB0aGlzLmVsZW1lbnRzLndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIH1cblxuICAgIGVhY2godGhpcy5hbmltYXRpb25zLCAoYW5pbWF0aW9uKSA9PiBhbmltYXRpb24ub25SZXNpemUoKSk7XG4gIH1cblxuICBvbldoZWVsKHsgcGl4ZWxZIH0pIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcIndoZWVsIGZyb20gcGFnZSBjbGFzc1wiKTtcbiAgICB0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZO1xuICB9XG5cbiAgb25Ub3VjaERvd24oZSkge1xuICAgIHRoaXMuaXNEb3duID0gdHJ1ZTtcblxuICAgIHRoaXMueS5zdGFydCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZO1xuICAgIHRoaXMuc2Nyb2xsLnN0YXJ0ID0gdGhpcy5zY3JvbGwuY3VycmVudDtcbiAgfVxuICBvblRvdWNoVXAoZSkge1xuICAgIHRoaXMuaXNEb3duID0gZmFsc2U7XG4gICAgdGhpcy55LmVuZCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZO1xuICB9XG4gIG9uVG91Y2hNb3ZlKGUpIHtcbiAgICBpZiAoIXRoaXMuaXNEb3duKSByZXR1cm47XG4gICAgdGhpcy55LmVuZCA9IGUudG91Y2hlcyA/IGUudG91Y2hlc1swXS5jbGllbnRZIDogZS5jbGllbnRZO1xuICAgIGNvbnN0IGRpc3RhbmNlID0gdGhpcy55LnN0YXJ0IC0gdGhpcy55LmVuZDtcblxuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IHRoaXMuc2Nyb2xsLnN0YXJ0ICsgZGlzdGFuY2U7XG4gIH1cblxuICAvLyBMb29wXG5cbiAgdXBkYXRlKCkge1xuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IEdTQVAudXRpbHMuY2xhbXAoXG4gICAgICAwLFxuICAgICAgdGhpcy5zY3JvbGwubGltaXQsXG4gICAgICB0aGlzLnNjcm9sbC50YXJnZXRcbiAgICApO1xuXG4gICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUoXG4gICAgICB0aGlzLnNjcm9sbC5jdXJyZW50LFxuICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0LFxuICAgICAgMC4xXG4gICAgKTtcblxuICAgIGlmICh0aGlzLnNjcm9sbC5jdXJyZW50IDwgMC4wMSkge1xuICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZWxlbWVudHMud3JhcHBlcikge1xuICAgICAgdGhpcy5lbGVtZW50cy53cmFwcGVyLnN0eWxlW1xuICAgICAgICB0aGlzLnRyYW5zZm9ybVByZWZpeFxuICAgICAgXSA9IGB0cmFuc2xhdGVZKC0ke3RoaXMuc2Nyb2xsLmN1cnJlbnR9cHgpYDtcbiAgICB9XG4gIH1cblxuICAvLyBMaXN0ZW5lcnNcblxuICBhZGRFdmVudExpc3RlbmVycygpIHt9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7fVxuXG4gIC8vIERlc3Ryb3lcblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiMDg5ODNhNWFjOWRkOWZhYTlhMjdcIikiXSwibmFtZXMiOlsiUGFnZSIsImNvbnN0cnVjdG9yIiwiZWxlbWVudCIsImVsZW1lbnRzIiwiaWQiLCJ0aGlzIiwic2VsZWN0b3IiLCJzZWxlY3RvckNoaWxkcmVuIiwiYWltYXRpb25zSGlnaGxpZ2h0cyIsImFuaW1hdGlvbnNUaXRsZXMiLCJhbmltYXRpb25zUGFyYWdyYXBocyIsImFuaW1hdGlvbnNMYWJlbHMiLCJwcmVsb2FkZXJzIiwidHJhbnNmb3JtUHJlZml4IiwiUHJlZml4IiwiY3JlYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2Nyb2xsIiwiY3VycmVudCIsInRhcmdldCIsInN0YXJ0IiwibGFzdCIsImxpbWl0IiwieCIsImRpc3RhbmNlIiwiZW5kIiwieSIsImVhY2giLCJlbnRyeSIsImtleSIsIndpbmRvdyIsIkhUTUxFbGVtZW50IiwiTm9kZUxpc3QiLCJBcnJheSIsImlzQXJyYXkiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiY3JlYXRlQW5pbWF0aW9ucyIsImNyZWF0ZVByZWxvYWRlciIsIm1hcCIsIkFzeW5jTG9hZCIsImFuaW1hdGlvbnMiLCJUaXRsZSIsInB1c2giLCJQYXJhZ3JhcGgiLCJMYWJlbCIsIkhpZ2hsaWdodCIsInNob3ciLCJhbmltYXRpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsIkNvbG9yc01hbmFnZXIiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnZXRBdHRyaWJ1dGUiLCJjb2xvciIsImFuaW1hdGlvbkluIiwiR1NBUCIsImZyb21UbyIsImF1dG9BbHBoYSIsImNhbGwiLCJfIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJoaWRlIiwiZGVzdHJveSIsInRvIiwib25Db21wbGV0ZSIsIm9uUmVzaXplIiwid3JhcHBlciIsImNsaWVudEhlaWdodCIsImlubmVySGVpZ2h0Iiwib25XaGVlbCIsInBpeGVsWSIsIm9uVG91Y2hEb3duIiwiZSIsImlzRG93biIsInRvdWNoZXMiLCJjbGllbnRZIiwib25Ub3VjaFVwIiwib25Ub3VjaE1vdmUiLCJ1cGRhdGUiLCJzdHlsZSIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9