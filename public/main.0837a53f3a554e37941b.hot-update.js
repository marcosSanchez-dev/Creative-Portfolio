/*! For license information please see main.0837a53f3a554e37941b.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/index.js":(e,t,n)=>{n.r(t);var s=n("./node_modules/normalize-wheel/index.js"),a=n.n(s),i=n("./node_modules/lodash/each.js"),o=n.n(i),h=n("./app/components/Canvas/index.js"),d=(n("./app/classes/Detection.js"),n("./app/components/Navigation.js")),c=n("./app/components/Preloader.js"),p=n("./app/pages/About/index.js"),r=n("./app/pages/Collections/index.js"),u=n("./app/pages/Home/index.js"),l=n("./app/pages/Detail/index.js");new class{constructor(){this.createContent(),this.createCanvas(),this.createPreloader(),this.createNavigation(),this.createPages(),this.addEventListeners(),this.addLinkListeners(),this.onResize(),this.update()}createNavigation(){this.navigation=new d.default({template:this.template})}createPreloader(){this.preloader=new c.default({canvas:this.canvas}),this.preloader.once("completed",this.onPreloaded.bind(this))}createCanvas(){this.canvas=new h.default({template:this.template})}createContent(){this.content=document.querySelector(".content"),this.template=this.content.getAttribute("data-template")}createPages(){this.pages={about:new p.default,collections:new r.default,home:new u.default,detail:new l.default},this.page=this.pages[this.template],this.page.create()}onPreloaded(){this.onResize(),this.canvas.onPreloaded(),this.page.show()}onPopState(){this.onChange({url:window.location.pathname,push:!0})}async onChange({url:e,push:t=!0}){if("https://www.marcossanchez.dev/"==e||e.includes("/about")){this.canvas.onChangeStart(this.template,e),await this.page.hide();const n=await window.fetch(e);if(200===n.status){const s=await n.text(),a=document.createElement("div");t&&window.history.pushState({},"",e),a.innerHTML=s;const i=a.querySelector(".content");this.template=i.getAttribute("data-template"),this.navigation.onChange(this.template),this.content.setAttribute("data-template",this.template),this.content.innerHTML=i.innerHTML,this.canvas.onChangeEnd(this.template),this.page=this.pages[this.template],this.page.create(),this.onResize(),this.page.show(),this.addLinkListeners()}else console.error(`response status: ${n.status}`)}else window.open(`${e}`,"_blank")}onResize(){this.page&&this.page.onResize&&this.page.onResize(),window.requestAnimationFrame((e=>{this.canvas&&this.canvas.onResize&&this.canvas.onResize()}))}onTouchDown(e){this.canvas&&this.canvas.onTouchDown&&this.canvas.onTouchDown(e),this.page&&this.page.onTouchDown&&this.page.onTouchDown(e)}onTouchMove(e){this.canvas&&this.canvas.onTouchMove&&this.canvas.onTouchMove(e),this.page&&this.page.onTouchMove&&this.page.onTouchMove(e)}onTouchUp(e){this.canvas&&this.canvas.onTouchUp&&this.canvas.onTouchUp(e),this.page&&this.page.onTouchUp&&this.page.onTouchUp(e)}onWheel(e){const t=a()(e);this.canvas&&this.canvas.onWheel&&this.canvas.onWheel(t),this.page&&this.page.onWheel&&this.page.onWheel(t)}update(){this.page&&this.page.update&&this.page.update(),this.canvas&&this.canvas.update&&this.canvas.update(this.page.scroll),this.frame=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){window.addEventListener("wheel",this.onWheel.bind(this)),window.addEventListener("mousedown",this.onTouchDown.bind(this)),window.addEventListener("mousemove",this.onTouchMove.bind(this)),window.addEventListener("mouseup",this.onTouchUp.bind(this)),window.addEventListener("touchstart",this.onTouchDown.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchUp.bind(this)),window.addEventListener("pointerdown",this.onTouchDown.bind(this)),window.addEventListener("pointermove",this.onTouchMove.bind(this)),window.addEventListener("pointerup",this.onTouchUp.bind(this)),window.addEventListener("resize",this.onResize.bind(this))}addLinkListeners(){const e=document.querySelectorAll("a");o()(e,(e=>{e.onclick=t=>{t.preventDefault();const{href:n}=e;this.onChange({url:n})}}))}}}},(function(e){e.h=()=>"2ce2fcd22e5249dce563"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtsQixPQUMzRHVDLE9BQU9rQyxpQkFBaUIsV0FBWXpFLEtBQUttRSxVQUFVakQsS0FBS2xCLE9BRXhEdUMsT0FBT2tDLGlCQUFpQixjQUFlekUsS0FBS2dFLFlBQVk5QyxLQUFLbEIsT0FDN0R1QyxPQUFPa0MsaUJBQWlCLGNBQWV6RSxLQUFLa0UsWUFBWWhELEtBQUtsQixPQUM3RHVDLE9BQU9rQyxpQkFBaUIsWUFBYXpFLEtBQUttRSxVQUFVakQsS0FBS2xCLE9BRXpEdUMsT0FBT2tDLGlCQUFpQixTQUFVekUsS0FBS1EsU0FBU1UsS0FBS2xCLE9BR3ZETyxtQkFDRSxNQUFNbUUsRUFBUXJELFNBQVNzRCxpQkFBaUIsS0FFeENDLEdBQUFBLENBQUtGLEdBQVFHLElBQ1hBLEVBQUtDLFFBQVdDLElBQ2RBLEVBQU1DLGlCQUVOLE1BQU0sS0FBRUMsR0FBU0osRUFDakI3RSxLQUFLcUMsU0FBUyxDQUFFQyxJQUFLMkMseUJDcFA3QkMsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zsb2VtYS8uL2FwcC9pbmRleC5qcyIsIndlYnBhY2s6Ly9mbG9lbWEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1uZXcgKi9cblxuaW1wb3J0IE5vcm1hbGl6ZVdoZWVsIGZyb20gXCJub3JtYWxpemUtd2hlZWxcIjtcblxuaW1wb3J0IGVhY2ggZnJvbSBcImxvZGFzaC9lYWNoXCI7XG5cbmltcG9ydCBDYW52YXMgZnJvbSBcImNvbXBvbmVudHMvQ2FudmFzXCI7XG5pbXBvcnQgRGV0ZWN0aW9uIGZyb20gXCJjbGFzc2VzL0RldGVjdGlvblwiO1xuXG5pbXBvcnQgTmF2aWdhdGlvbiBmcm9tIFwiY29tcG9uZW50cy9OYXZpZ2F0aW9uXCI7XG5pbXBvcnQgUHJlbG9hZGVyIGZyb20gXCJjb21wb25lbnRzL1ByZWxvYWRlclwiO1xuXG5pbXBvcnQgQWJvdXQgZnJvbSBcInBhZ2VzL0Fib3V0XCI7XG5pbXBvcnQgQ29sbGVjdGlvbnMgZnJvbSBcInBhZ2VzL0NvbGxlY3Rpb25zXCI7XG5pbXBvcnQgSG9tZSBmcm9tIFwicGFnZXMvSG9tZVwiO1xuaW1wb3J0IERldGFpbCBmcm9tIFwicGFnZXMvRGV0YWlsXCI7XG5cbmNsYXNzIEFwcCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY3JlYXRlQ29udGVudCgpO1xuXG4gICAgdGhpcy5jcmVhdGVDYW52YXMoKTtcbiAgICB0aGlzLmNyZWF0ZVByZWxvYWRlcigpO1xuICAgIHRoaXMuY3JlYXRlTmF2aWdhdGlvbigpO1xuICAgIHRoaXMuY3JlYXRlUGFnZXMoKTtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmFkZExpbmtMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMub25SZXNpemUoKTtcblxuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBjcmVhdGVOYXZpZ2F0aW9uKCkge1xuICAgIHRoaXMubmF2aWdhdGlvbiA9IG5ldyBOYXZpZ2F0aW9uKHtcbiAgICAgIHRlbXBsYXRlOiB0aGlzLnRlbXBsYXRlLFxuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlUHJlbG9hZGVyKCkge1xuICAgIHRoaXMucHJlbG9hZGVyID0gbmV3IFByZWxvYWRlcih7XG4gICAgICBjYW52YXM6IHRoaXMuY2FudmFzLFxuICAgIH0pO1xuXG4gICAgdGhpcy5wcmVsb2FkZXIub25jZShcImNvbXBsZXRlZFwiLCB0aGlzLm9uUHJlbG9hZGVkLmJpbmQodGhpcykpO1xuICB9XG5cbiAgY3JlYXRlQ2FudmFzKCkge1xuICAgIHRoaXMuY2FudmFzID0gbmV3IENhbnZhcyh7XG4gICAgICB0ZW1wbGF0ZTogdGhpcy50ZW1wbGF0ZSxcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZUNvbnRlbnQoKSB7XG4gICAgdGhpcy5jb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50XCIpO1xuICAgIHRoaXMudGVtcGxhdGUgPSB0aGlzLmNvbnRlbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10ZW1wbGF0ZVwiKTtcbiAgfVxuXG4gIGNyZWF0ZVBhZ2VzKCkge1xuICAgIHRoaXMucGFnZXMgPSB7XG4gICAgICBhYm91dDogbmV3IEFib3V0KCksXG4gICAgICBjb2xsZWN0aW9uczogbmV3IENvbGxlY3Rpb25zKCksXG4gICAgICBob21lOiBuZXcgSG9tZSgpLFxuICAgICAgZGV0YWlsOiBuZXcgRGV0YWlsKCksXG4gICAgfTtcblxuICAgIHRoaXMucGFnZSA9IHRoaXMucGFnZXNbdGhpcy50ZW1wbGF0ZV07XG4gICAgdGhpcy5wYWdlLmNyZWF0ZSgpO1xuICB9XG5cbiAgLypcbiAgICogRXZlbnRzXG4gICAqL1xuXG4gIG9uUHJlbG9hZGVkKCkge1xuICAgIHRoaXMub25SZXNpemUoKTtcblxuICAgIHRoaXMuY2FudmFzLm9uUHJlbG9hZGVkKCk7XG5cbiAgICB0aGlzLnBhZ2Uuc2hvdygpO1xuICB9XG5cbiAgb25Qb3BTdGF0ZSgpIHtcbiAgICB0aGlzLm9uQ2hhbmdlKHtcbiAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgcHVzaDogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIG9uQ2hhbmdlKHsgdXJsLCBwdXNoID0gdHJ1ZSB9KSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJwYXRobmFtZTogXCIsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7XG4gICAgLy8gY29uc29sZS5sb2coXCJ3aW5kb3cubG9jYXRpb246IFwiLCB3aW5kb3cubG9jYXRpb24pO1xuICAgIC8vIGNvbnNvbGUubG9nKFwidXJsOiBcIiwgdXJsKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcInVybCA9PSAvOiBcIiwgdXJsID09IFwiL1wiKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcInVybCBpbmNsdWRlcyBBYm91dDogXCIsIHVybC5pbmNsdWRlcyhcIi9hYm91dFwiKSk7XG4gICAgLy8gY29uc29sZS5sb2coXCJ1cmwgcGF0aG5hbWUgPT09IEhvbWU6IFwiLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT0gXCIvXCIpO1xuXG4gICAgaWYgKHVybCA9PSBcImh0dHBzOi8vd3d3Lm1hcmNvc3NhbmNoZXouZGV2L1wiIHx8IHVybC5pbmNsdWRlcyhcIi9hYm91dFwiKSkge1xuICAgICAgdGhpcy5jYW52YXMub25DaGFuZ2VTdGFydCh0aGlzLnRlbXBsYXRlLCB1cmwpO1xuXG4gICAgICBhd2FpdCB0aGlzLnBhZ2UuaGlkZSgpO1xuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCB3aW5kb3cuZmV0Y2godXJsKTtcblxuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgICBpZiAocHVzaCkge1xuICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgXCJcIiwgdXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgICAgIGNvbnN0IGRpdkNvbnRlbnQgPSBkaXYucXVlcnlTZWxlY3RvcihcIi5jb250ZW50XCIpO1xuXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBkaXZDb250ZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdGVtcGxhdGVcIik7XG5cbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uLm9uQ2hhbmdlKHRoaXMudGVtcGxhdGUpO1xuXG4gICAgICAgIHRoaXMuY29udGVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRlbXBsYXRlXCIsIHRoaXMudGVtcGxhdGUpO1xuICAgICAgICB0aGlzLmNvbnRlbnQuaW5uZXJIVE1MID0gZGl2Q29udGVudC5pbm5lckhUTUw7XG5cbiAgICAgICAgdGhpcy5jYW52YXMub25DaGFuZ2VFbmQodGhpcy50ZW1wbGF0ZSk7XG5cbiAgICAgICAgdGhpcy5wYWdlID0gdGhpcy5wYWdlc1t0aGlzLnRlbXBsYXRlXTtcbiAgICAgICAgdGhpcy5wYWdlLmNyZWF0ZSgpO1xuXG4gICAgICAgIHRoaXMub25SZXNpemUoKTtcblxuICAgICAgICB0aGlzLnBhZ2Uuc2hvdygpO1xuXG4gICAgICAgIHRoaXMuYWRkTGlua0xpc3RlbmVycygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgcmVzcG9uc2Ugc3RhdHVzOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5vcGVuKGAke3VybH1gLCBcIl9ibGFua1wiKTtcbiAgICB9XG4gIH1cblxuICBvblJlc2l6ZSgpIHtcbiAgICBpZiAodGhpcy5wYWdlICYmIHRoaXMucGFnZS5vblJlc2l6ZSkge1xuICAgICAgdGhpcy5wYWdlLm9uUmVzaXplKCk7XG4gICAgfVxuXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoXykgPT4ge1xuICAgICAgaWYgKHRoaXMuY2FudmFzICYmIHRoaXMuY2FudmFzLm9uUmVzaXplKSB7XG4gICAgICAgIHRoaXMuY2FudmFzLm9uUmVzaXplKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvblRvdWNoRG93bihlKSB7XG4gICAgaWYgKHRoaXMuY2FudmFzICYmIHRoaXMuY2FudmFzLm9uVG91Y2hEb3duKSB7XG4gICAgICB0aGlzLmNhbnZhcy5vblRvdWNoRG93bihlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYWdlICYmIHRoaXMucGFnZS5vblRvdWNoRG93bikge1xuICAgICAgdGhpcy5wYWdlLm9uVG91Y2hEb3duKGUpO1xuICAgIH1cbiAgfVxuXG4gIG9uVG91Y2hNb3ZlKGUpIHtcbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMub25Ub3VjaE1vdmUpIHtcbiAgICAgIHRoaXMuY2FudmFzLm9uVG91Y2hNb3ZlKGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLm9uVG91Y2hNb3ZlKSB7XG4gICAgICB0aGlzLnBhZ2Uub25Ub3VjaE1vdmUoZSk7XG4gICAgfVxuICB9XG5cbiAgb25Ub3VjaFVwKGUpIHtcbiAgICBpZiAodGhpcy5jYW52YXMgJiYgdGhpcy5jYW52YXMub25Ub3VjaFVwKSB7XG4gICAgICB0aGlzLmNhbnZhcy5vblRvdWNoVXAoZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFnZSAmJiB0aGlzLnBhZ2Uub25Ub3VjaFVwKSB7XG4gICAgICB0aGlzLnBhZ2Uub25Ub3VjaFVwKGUpO1xuICAgIH1cbiAgfVxuXG4gIG9uV2hlZWwoZSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRXaGVlbCA9IE5vcm1hbGl6ZVdoZWVsKGUpO1xuXG4gICAgaWYgKHRoaXMuY2FudmFzICYmIHRoaXMuY2FudmFzLm9uV2hlZWwpIHtcbiAgICAgIHRoaXMuY2FudmFzLm9uV2hlZWwobm9ybWFsaXplZFdoZWVsKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYWdlICYmIHRoaXMucGFnZS5vbldoZWVsKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIm9ud2hlZWw6IFwiLCB0cnVlKTtcbiAgICAgIHRoaXMucGFnZS5vbldoZWVsKG5vcm1hbGl6ZWRXaGVlbCk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIExPb3BcbiAgICovXG5cbiAgdXBkYXRlKCkge1xuICAgIGlmICh0aGlzLnBhZ2UgJiYgdGhpcy5wYWdlLnVwZGF0ZSkge1xuICAgICAgdGhpcy5wYWdlLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNhbnZhcyAmJiB0aGlzLmNhbnZhcy51cGRhdGUpIHtcbiAgICAgIHRoaXMuY2FudmFzLnVwZGF0ZSh0aGlzLnBhZ2Uuc2Nyb2xsKTtcbiAgICB9XG5cbiAgICB0aGlzLmZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qXG4gICAqIExpc3RlbmVyc1xuICAgKi9cblxuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIHRoaXMub25XaGVlbC5iaW5kKHRoaXMpKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMub25Ub3VjaERvd24uYmluZCh0aGlzKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5vblRvdWNoVXAuYmluZCh0aGlzKSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5vblRvdWNoRG93bi5iaW5kKHRoaXMpKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcykpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5vblRvdWNoVXAuYmluZCh0aGlzKSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMub25Ub3VjaERvd24uYmluZCh0aGlzKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcykpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMub25Ub3VjaFVwLmJpbmQodGhpcykpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGFkZExpbmtMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYVwiKTtcblxuICAgIGVhY2gobGlua3MsIChsaW5rKSA9PiB7XG4gICAgICBsaW5rLm9uY2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB7IGhyZWYgfSA9IGxpbms7XG4gICAgICAgIHRoaXMub25DaGFuZ2UoeyB1cmw6IGhyZWYgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG59XG5cbm5ldyBBcHAoKTtcbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjJjZTJmY2QyMmU1MjQ5ZGNlNTYzXCIpIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGhpcyIsImNyZWF0ZUNvbnRlbnQiLCJjcmVhdGVDYW52YXMiLCJjcmVhdGVQcmVsb2FkZXIiLCJjcmVhdGVOYXZpZ2F0aW9uIiwiY3JlYXRlUGFnZXMiLCJhZGRFdmVudExpc3RlbmVycyIsImFkZExpbmtMaXN0ZW5lcnMiLCJvblJlc2l6ZSIsInVwZGF0ZSIsIm5hdmlnYXRpb24iLCJOYXZpZ2F0aW9uIiwidGVtcGxhdGUiLCJwcmVsb2FkZXIiLCJQcmVsb2FkZXIiLCJjYW52YXMiLCJvbmNlIiwib25QcmVsb2FkZWQiLCJiaW5kIiwiQ2FudmFzIiwiY29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdldEF0dHJpYnV0ZSIsInBhZ2VzIiwiYWJvdXQiLCJBYm91dCIsImNvbGxlY3Rpb25zIiwiQ29sbGVjdGlvbnMiLCJob21lIiwiSG9tZSIsImRldGFpbCIsIkRldGFpbCIsInBhZ2UiLCJjcmVhdGUiLCJzaG93Iiwib25Qb3BTdGF0ZSIsIm9uQ2hhbmdlIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsInB1c2giLCJpbmNsdWRlcyIsIm9uQ2hhbmdlU3RhcnQiLCJoaWRlIiwicmVzIiwiZmV0Y2giLCJzdGF0dXMiLCJodG1sIiwidGV4dCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiaW5uZXJIVE1MIiwiZGl2Q29udGVudCIsInNldEF0dHJpYnV0ZSIsIm9uQ2hhbmdlRW5kIiwiY29uc29sZSIsImVycm9yIiwib3BlbiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl8iLCJvblRvdWNoRG93biIsImUiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJub3JtYWxpemVkV2hlZWwiLCJOb3JtYWxpemVXaGVlbCIsInNjcm9sbCIsImZyYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImVhY2giLCJsaW5rIiwib25jbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJocmVmIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9